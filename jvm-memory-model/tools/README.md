# JVM 内存模型与垃圾收集器可视化工具

## 工具介绍

这是一个纯前端的交互式可视化工具，用于帮助初学者学习和掌握 Java 内存模型（JVM Memory Model）和垃圾收集器（Garbage Collector）的工作原理。

## 功能说明

### 1. 内存模型可视化
- **运行时数据区展示**：堆内存（Eden、Survivor0、Survivor1、Old）、栈内存、方法区
- **对象分配**：可视化对象在内存中的分配过程
- **引用关系**：展示对象之间的引用关系（连线图 + 颜色编码）
- **GC Roots**：高亮显示 GC Roots 对象

### 2. 垃圾收集器支持
支持以下 6 种垃圾收集器：
- **Serial GC**：单线程，标记-复制（新生代）、标记-整理（老年代）
- **Parallel GC**：多线程并行，标记-复制（新生代）、标记-整理（老年代）
- **CMS GC**：并发标记清除，四阶段（初始标记 STW、并发标记、重新标记 STW、并发清除）
- **G1 GC**：分区管理，Young GC、Mixed GC
- **ZGC**：低延迟，着色指针、并发标记和并发转移
- **Shenandoah GC**：低延迟，并发标记和并发整理

### 3. 交互功能
- **对象分配**：用户指定对象数量，触发对象分配
- **引用创建**：用户指定平均出度和最大边数，创建对象引用关系
- **GC 执行**：选择 GC 类型，执行垃圾回收
- **单步执行**：逐步执行 GC 的各个阶段，慢速展示
- **重置**：清空所有状态，重新开始

## 使用方法

1. **打开工具**：在浏览器中打开 `index.html`

2. **选择 GC 类型**：从下拉菜单中选择要使用的垃圾收集器

3. **分配对象**：
   - 输入对象数量（默认 1）
   - 点击"分配对象"按钮
   - 对象会从线程入口点飞入到 Eden 区

4. **创建引用**：
   - 输入平均出度（默认 1，范围 0-3）
   - 输入最大边数（默认 200）
   - 点击"创建引用"按钮
   - 系统会随机创建对象之间的引用关系

5. **执行 GC**：
   - 点击"执行 GC"按钮启动垃圾回收
   - 点击"下一步"按钮逐步执行 GC 的各个阶段
   - 观察对象颜色变化（绿色=可达，红色=不可达）
   - 观察对象移动过程（复制、整理）

6. **查看统计信息**：底部面板显示当前内存状态和统计信息

## 技术实现

### 前端技术栈
- **HTML5**：页面结构
- **Canvas API**：内存区域和对象的可视化绘制
- **原生 JavaScript (ES6+)**：所有逻辑实现
- **CSS3**：样式和布局

### 核心模块
- `memory-model.js`：内存模型核心逻辑（对象、堆、栈）
- `gc-engines/`：各种 GC 算法的实现
- `visualizer.js`：Canvas 渲染逻辑
- `controller.js`：用户交互控制
- `utils.js`：工具函数

### 可视化特性
- **颜色编码**：
  - 灰色：普通对象
  - 绿色：可达对象
  - 红色：不可达对象
  - 黄色：正在移动的对象
  - 蓝色：GC Roots
- **引用连线**：根据边数阈值自动降噪（超过阈值只显示关键边）
- **动画效果**：对象飞入、对象移动动画

## 支持的 GC 类型说明

### Serial GC
- 单线程执行
- 新生代使用标记-复制算法
- 老年代使用标记-整理算法
- 适合小堆内存、单核环境

### Parallel GC
- 多线程并行执行
- 新生代使用并行标记-复制
- 老年代使用并行标记-整理
- 适合多核环境，吞吐量优先

### CMS GC
- 并发标记清除
- 四阶段：初始标记（STW）→ 并发标记 → 重新标记（STW）→ 并发清除
- 适合低延迟需求

### G1 GC
- 分区管理（Region）
- Young GC：回收新生代 Region
- Mixed GC：回收新生代 + 部分老年代 Region
- 适合大堆内存，可预测停顿时间

### ZGC
- 极低延迟（< 10ms）
- 着色指针技术
- 并发标记和并发转移
- 适合大堆内存、低延迟需求

### Shenandoah GC
- 低延迟
- 并发标记和并发整理
- 连接矩阵维护跨 Region 引用
- 适合大堆内存、低延迟需求

## 浏览器兼容性

- Chrome/Edge (推荐)
- Firefox
- Safari

需要支持 ES6+ 和 Canvas API。

## 注意事项

- 本工具为教学演示工具，实际 JVM 实现可能有所不同
- 对象数量和引用关系建议控制在合理范围内，避免性能问题
- 某些 GC 算法的实现进行了简化，重点展示核心概念


