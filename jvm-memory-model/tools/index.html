<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JVM 内存模型与垃圾收集器可视化工具</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 顶部控制栏 -->
    <div class="control-bar">
        <div class="control-group">
            <label for="gc-selector">GC 类型:</label>
            <select id="gc-selector">
                <option value="serial">Serial GC</option>
                <option value="parallel">Parallel GC</option>
                <option value="cms">CMS GC</option>
                <option value="g1">G1 GC</option>
                <option value="zgc">ZGC</option>
                <option value="shenandoah">Shenandoah GC</option>
            </select>
        </div>
        
        <div class="control-group">
            <label for="object-count-input">对象数:</label>
            <input type="number" id="object-count-input" value="1" min="1" max="100">
        </div>
        
        <div class="control-group">
            <label for="out-degree-input">平均出度:</label>
            <input type="number" id="out-degree-input" value="1" min="0" max="3" step="0.1">
        </div>
        
        <div class="control-group">
            <label for="max-edges-input">最大边数:</label>
            <input type="number" id="max-edges-input" value="200" min="10" max="1000">
        </div>
        
        <div class="control-group">
            <button id="allocate-btn">分配对象</button>
            <button id="create-refs-btn">创建引用</button>
            <button id="gc-btn">执行 GC</button>
            <button id="next-step-btn">下一步</button>
            <button id="reset-btn">重置</button>
        </div>
    </div>
    
    <!-- 主可视化区域 -->
    <div class="visualization-container">
        <canvas id="memory-canvas"></canvas>
    </div>
    
    <!-- 底部说明栏 -->
    <div class="info-panel" id="info-panel">
        <div class="step-description" id="step-description">
            欢迎使用 JVM 内存模型与垃圾收集器可视化工具。请先选择 GC 类型，然后分配对象。
        </div>
        <div class="stats-display" id="stats-display">
            <div>总对象数: 0</div>
            <div>Eden: 0 | Survivor0: 0 | Survivor1: 0 | Old: 0</div>
            <div>可达对象: 0 | 不可达对象: 0</div>
            <div>GC Roots: 0</div>
        </div>
    </div>
    
    <!-- 引入 JavaScript 文件 -->
    <script src="js/utils.js"></script>
    <script src="js/memory-model.js"></script>
    <script src="js/gc-engines/base-gc.js"></script>
    <script src="js/gc-engines/serial-gc.js"></script>
    <script src="js/gc-engines/parallel-gc.js"></script>
    <script src="js/gc-engines/cms-gc.js"></script>
    <script src="js/gc-engines/g1-gc.js"></script>
    <script src="js/gc-engines/zgc.js"></script>
    <script src="js/gc-engines/shenandoah-gc.js"></script>
    <script src="js/visualizer.js"></script>
    <script src="js/controller.js"></script>
    
    <script>
        // 初始化控制器
        document.addEventListener('DOMContentLoaded', () => {
            const controller = new VisualizationController();
            controller.initialize();
            window.controller = controller; // 用于调试
        });
    </script>
</body>
</html>


