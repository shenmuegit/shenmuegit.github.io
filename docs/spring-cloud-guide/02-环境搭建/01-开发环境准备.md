# 开发环境准备

在开始学习 Spring Cloud 之前，我们需要准备好开发环境。本章将详细介绍如何安装和配置所需的开发工具。

## JDK 17+ 安装配置

### 1. 下载 JDK

访问 Oracle 官网或 OpenJDK 官网下载 JDK 17 或更高版本：

- **Oracle JDK**：https://www.oracle.com/java/technologies/downloads/
- **OpenJDK**：https://adoptium.net/

### 2. 安装 JDK

**Windows 系统**：
1. 运行下载的安装程序
2. 按照向导完成安装
3. 默认安装路径通常是 `C:\Program Files\Java\jdk-17`

**macOS 系统**：
```bash
# 使用 Homebrew 安装
brew install openjdk@17
```

**Linux 系统**：
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install openjdk-17-jdk

# CentOS/RHEL
sudo yum install java-17-openjdk-devel
```

### 3. 配置环境变量

**Windows 系统**：
1. 右键"此电脑" → "属性" → "高级系统设置" → "环境变量"
2. 在"系统变量"中新建 `JAVA_HOME`，值为 JDK 安装路径，例如：`C:\Program Files\Java\jdk-17`
3. 编辑 `Path` 变量，添加 `%JAVA_HOME%\bin`

**macOS/Linux 系统**：
编辑 `~/.bashrc` 或 `~/.zshrc` 文件：

```bash
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
export PATH=$JAVA_HOME/bin:$PATH
```

然后执行：
```bash
source ~/.bashrc  # 或 source ~/.zshrc
```

### 4. 验证安装

打开命令行，执行：

```bash
java -version
javac -version
```

应该看到类似输出：
```
java version "17.0.x" 2024-xx-xx LTS
Java(TM) SE Runtime Environment (build 17.0.x+xx-LTS-xxx)
Java HotSpot(TM) 64-Bit Server VM (build 17.0.x+xx-LTS-xxx, mixed mode, sharing)
```

## Maven 安装配置

### 1. 下载 Maven

访问 Maven 官网下载：https://maven.apache.org/download.cgi

下载 `apache-maven-3.9.x-bin.zip`（Windows）或 `apache-maven-3.9.x-bin.tar.gz`（macOS/Linux）

### 2. 安装 Maven

**Windows 系统**：
1. 解压到指定目录，例如：`C:\Program Files\Apache\maven`
2. 配置环境变量：
   - 新建 `MAVEN_HOME`，值为 Maven 解压路径
   - 编辑 `Path`，添加 `%MAVEN_HOME%\bin`

**macOS 系统**：
```bash
brew install maven
```

**Linux 系统**：
```bash
# 解压
tar -xzf apache-maven-3.9.x-bin.tar.gz
sudo mv apache-maven-3.9.x /opt/

# 配置环境变量
export MAVEN_HOME=/opt/apache-maven-3.9.x
export PATH=$MAVEN_HOME/bin:$PATH
```

### 3. 配置 Maven 镜像（可选但推荐）

编辑 Maven 配置文件 `$MAVEN_HOME/conf/settings.xml` 或用户目录下的 `~/.m2/settings.xml`：

```xml
<settings>
  <mirrors>
    <mirror>
      <id>aliyun</id>
      <name>Aliyun Maven</name>
      <url>https://maven.aliyun.com/repository/public</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings>
```

### 4. 验证安装

```bash
mvn -version
```

应该看到类似输出：
```
Apache Maven 3.9.x
Maven home: C:\Program Files\Apache\maven
Java version: 17.0.x, vendor: Oracle Corporation
```

## IDE 选择与配置

### IntelliJ IDEA（推荐）

#### 1. 下载安装

访问 JetBrains 官网：https://www.jetbrains.com/idea/

下载 IntelliJ IDEA Ultimate 或 Community 版本。

#### 2. 配置 JDK

1. 打开 IntelliJ IDEA
2. File → Project Structure → Project
3. 设置 Project SDK 为 JDK 17
4. 设置 Project language level 为 17

#### 3. 配置 Maven

1. File → Settings → Build, Execution, Deployment → Build Tools → Maven
2. 设置 Maven home directory
3. 设置 User settings file（指向你的 settings.xml）
4. 设置 Local repository（本地仓库路径）

#### 4. 安装插件（推荐）

- Spring Assistant
- Lombok
- Maven Helper

### Eclipse（可选）

1. 下载 Eclipse IDE for Enterprise Java and Web Developers
2. 安装 Spring Tools 插件
3. 配置 JDK 和 Maven

### VS Code（可选）

1. 安装 Java Extension Pack
2. 安装 Spring Boot Extension Pack
3. 配置 JDK 路径

## Git 安装配置

### 1. 下载安装

访问 Git 官网：https://git-scm.com/downloads

### 2. 配置 Git

```bash
# 设置用户名
git config --global user.name "Your Name"

# 设置邮箱
git config --global user.email "your.email@example.com"

# 查看配置
git config --list
```

### 3. 验证安装

```bash
git --version
```

## 环境变量配置总结

### Windows 系统环境变量

需要配置的环境变量：

| 变量名 | 值示例 |
|--------|--------|
| JAVA_HOME | C:\Program Files\Java\jdk-17 |
| MAVEN_HOME | C:\Program Files\Apache\maven |
| Path | %JAVA_HOME%\bin;%MAVEN_HOME%\bin |

### macOS/Linux 系统环境变量

在 `~/.bashrc` 或 `~/.zshrc` 中添加：

```bash
# Java
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
export PATH=$JAVA_HOME/bin:$PATH

# Maven
export MAVEN_HOME=/opt/apache-maven-3.9.x
export PATH=$MAVEN_HOME/bin:$PATH
```

## 验证环境

创建一个简单的测试项目验证环境是否正确配置：

```bash
# 使用 Maven 创建 Spring Boot 项目
mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=test-project \
  -DarchetypeArtifactId=maven-archetype-quickstart \
  -DinteractiveMode=false

cd test-project
mvn clean compile
```

如果编译成功，说明环境配置正确。

## 常见问题

### 1. Java 版本不匹配

**问题**：`java -version` 显示的版本不是 17

**解决**：检查 `JAVA_HOME` 和 `Path` 环境变量，确保指向正确的 JDK 17 安装路径。

### 2. Maven 下载依赖慢

**解决**：配置国内镜像源（如阿里云镜像），参考上面的 Maven 配置。

### 3. IDE 找不到 JDK

**解决**：在 IDE 中手动指定 JDK 路径，确保使用 JDK 17 或更高版本。

## 下一步

环境准备完成后，我们可以开始创建第一个 Spring Cloud 项目了。请继续学习下一章节：[项目初始化](./02-项目初始化.md)。

