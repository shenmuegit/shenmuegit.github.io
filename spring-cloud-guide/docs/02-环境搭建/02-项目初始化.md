---
layout: default
title: é¡¹ç›®åˆå§‹åŒ–
parent: ç¯å¢ƒæ­å»º
grand_parent: Spring Cloud æ•™ç¨‹
nav_order: 2
---

# é¡¹ç›®åˆå§‹åŒ–

> ğŸ“Š **éš¾åº¦**ï¼šğŸŸ¢ å…¥é—¨ | â±ï¸ **é˜…è¯»æ—¶é—´**ï¼š20 åˆ†é’Ÿ
> 
> ğŸ“ **æœ¬ç« æ‘˜è¦**ï¼šåˆ›å»º Spring Cloud å¤šæ¨¡å—é¡¹ç›®ï¼Œé…ç½®çˆ¶é¡¹ç›®ä¾èµ–ç®¡ç†ï¼Œåˆå§‹åŒ–å­æ¨¡å—ç»“æ„ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å­¦å®Œæœ¬ç« åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- åˆ›å»º Spring Cloud çˆ¶é¡¹ç›®
- é…ç½®ä¾èµ–ç‰ˆæœ¬ç®¡ç†
- åˆ›å»ºå­æ¨¡å—é¡¹ç›®
- ç†è§£å¤šæ¨¡å—é¡¹ç›®ç»“æ„

---

æœ¬ç« å°†ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ª Spring Cloud é¡¹ç›®ï¼ŒåŒ…æ‹¬çˆ¶é¡¹ç›®çš„åˆ›å»ºã€ä¾èµ–ç®¡ç†å’Œå­æ¨¡å—çš„åˆå§‹åŒ–ã€‚

## åˆ›å»ºçˆ¶é¡¹ç›®ï¼ˆParent Projectï¼‰

Spring Cloud é¡¹ç›®é€šå¸¸é‡‡ç”¨å¤šæ¨¡å—ç»“æ„ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªçˆ¶é¡¹ç›®æ¥ç®¡ç†æ‰€æœ‰å­æ¨¡å—çš„ä¾èµ–ç‰ˆæœ¬ã€‚

### 1. åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„

```bash
mkdir spring-cloud-demo
cd spring-cloud-demo
```

### 2. åˆ›å»ºçˆ¶é¡¹ç›® pom.xml

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `pom.xml` æ–‡ä»¶ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>spring-cloud-demo</artifactId>
    <version>1.0.0</version>
    <packaging>pom</packaging>

    <name>Spring Cloud Demo</name>
    <description>Spring Cloud 2025.0 ç¤ºä¾‹é¡¹ç›®</description>

    <properties>
        <java.version>17</java.version>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <spring-boot.version>3.2.0</spring-boot.version>
        <spring-cloud.version>2025.0.0</spring-cloud.version>
    </properties>

    <!-- å­æ¨¡å— -->
    <modules>
        <module>eureka-server</module>
        <module>service-provider</module>
        <module>service-consumer</module>
    </modules>

    <!-- ä¾èµ–ç®¡ç† -->
    <dependencyManagement>
        <dependencies>
            <!-- Spring Boot ä¾èµ–ç®¡ç† -->
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring-boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <!-- Spring Cloud ä¾èµ–ç®¡ç† -->
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring-cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.springframework.boot</groupId>
                    <artifactId>spring-boot-maven-plugin</artifactId>
                    <version>${spring-boot.version}</version>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project>
```

### 3. å…³é”®é…ç½®è¯´æ˜

- **packaging**: è®¾ç½®ä¸º `pom`ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªçˆ¶é¡¹ç›®ï¼Œä¸ç”Ÿæˆ jar åŒ…
- **modules**: å®šä¹‰æ‰€æœ‰å­æ¨¡å—
- **dependencyManagement**: ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬
- **properties**: å®šä¹‰ç‰ˆæœ¬å·ç­‰å±æ€§

## é…ç½® pom.xml è¯¦è§£

### Spring Cloud ç‰ˆæœ¬ç®¡ç†

Spring Cloud ä½¿ç”¨ BOMï¼ˆBill of Materialsï¼‰æ¥ç®¡ç†ç‰ˆæœ¬ï¼Œé€šè¿‡ `spring-cloud-dependencies` å¯ä»¥ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ Spring Cloud ç»„ä»¶çš„ç‰ˆæœ¬ã€‚

### å¸¸ç”¨ Spring Cloud ç»„ä»¶ç‰ˆæœ¬

åœ¨ `dependencyManagement` ä¸­ï¼ŒSpring Cloud ä¼šè‡ªåŠ¨ç®¡ç†ä»¥ä¸‹ç»„ä»¶çš„ç‰ˆæœ¬ï¼š

- `spring-cloud-starter-netflix-eureka-server`
- `spring-cloud-starter-netflix-eureka-client`
- `spring-cloud-config-server`
- `spring-cloud-config-client`
- `spring-cloud-starter-gateway`
- `spring-cloud-starter-openfeign`
- `spring-cloud-starter-circuitbreaker-resilience4j`

## åˆ›å»ºå­æ¨¡å—

### 1. Eureka Server æ¨¡å—

åˆ›å»º `eureka-server` ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º `pom.xml`ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>spring-cloud-demo</artifactId>
        <version>1.0.0</version>
    </parent>

    <artifactId>eureka-server</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
    </dependencies>
</project>
```

### 2. Service Provider æ¨¡å—

åˆ›å»º `service-provider` ç›®å½•ï¼Œåˆ›å»º `pom.xml`ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>spring-cloud-demo</artifactId>
        <version>1.0.0</version>
    </parent>

    <artifactId>service-provider</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
        </dependency>
    </dependencies>
</project>
```

### 3. Service Consumer æ¨¡å—

åˆ›å»º `service-consumer` ç›®å½•ï¼Œåˆ›å»º `pom.xml`ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>spring-cloud-demo</artifactId>
        <version>1.0.0</version>
    </parent>

    <artifactId>service-consumer</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-openfeign</artifactId>
        </dependency>
    </dependencies>
</project>
```

## é¡¹ç›®ç»“æ„è¯´æ˜

å®Œæ•´çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```
spring-cloud-demo/
â”œâ”€â”€ pom.xml                          # çˆ¶é¡¹ç›® pom
â”œâ”€â”€ eureka-server/                   # Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒ
â”‚   â”œâ”€â”€ pom.xml
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ main/
â”‚           â”œâ”€â”€ java/
â”‚           â”‚   â””â”€â”€ com/example/eureka/
â”‚           â”‚       â””â”€â”€ EurekaServerApplication.java
â”‚           â””â”€â”€ resources/
â”‚               â””â”€â”€ application.yml
â”œâ”€â”€ service-provider/                 # æœåŠ¡æä¾›è€…
â”‚   â”œâ”€â”€ pom.xml
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ main/
â”‚           â”œâ”€â”€ java/
â”‚           â”‚   â””â”€â”€ com/example/provider/
â”‚           â”‚       â”œâ”€â”€ ProviderApplication.java
â”‚           â”‚       â””â”€â”€ controller/
â”‚           â”‚           â””â”€â”€ HelloController.java
â”‚           â””â”€â”€ resources/
â”‚               â””â”€â”€ application.yml
â””â”€â”€ service-consumer/                 # æœåŠ¡æ¶ˆè´¹è€…
    â”œâ”€â”€ pom.xml
    â””â”€â”€ src/
        â””â”€â”€ main/
            â”œâ”€â”€ java/
            â”‚   â””â”€â”€ com/example/consumer/
            â”‚       â”œâ”€â”€ ConsumerApplication.java
            â”‚       â””â”€â”€ controller/
            â”‚           â””â”€â”€ ConsumerController.java
            â””â”€â”€ resources/
                â””â”€â”€ application.yml
```

## ç¬¬ä¸€ä¸ª Spring Boot åº”ç”¨

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ Spring Boot åº”ç”¨æ¥éªŒè¯é¡¹ç›®é…ç½®ã€‚

### 1. åˆ›å»ºä¸»ç±»

åœ¨ `service-provider/src/main/java/com/example/provider/` ç›®å½•ä¸‹åˆ›å»º `ProviderApplication.java`ï¼š

```java
package com.example.provider;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class ProviderApplication {
    public static void main(String[] args) {
        SpringApplication.run(ProviderApplication.class, args);
    }
}
```

### 2. åˆ›å»º Controller

åˆ›å»º `HelloController.java`ï¼š

```java
package com.example.provider.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {
    
    @GetMapping("/hello")
    public String hello() {
        return "Hello from Service Provider!";
    }
}
```

### 3. åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨ `service-provider/src/main/resources/` ç›®å½•ä¸‹åˆ›å»º `application.yml`ï¼š

```yaml
server:
  port: 8081

spring:
  application:
    name: service-provider
```

### 4. è¿è¡Œåº”ç”¨

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
mvn clean install
cd service-provider
mvn spring-boot:run
```

è®¿é—® http://localhost:8081/helloï¼Œåº”è¯¥çœ‹åˆ° "Hello from Service Provider!"ã€‚

## Maven å¸¸ç”¨å‘½ä»¤

```bash
# æ¸…ç†é¡¹ç›®
mvn clean

# ç¼–è¯‘é¡¹ç›®
mvn compile

# æ‰“åŒ…é¡¹ç›®
mvn package

# å®‰è£…åˆ°æœ¬åœ°ä»“åº“
mvn install

# è¿è¡Œ Spring Boot åº”ç”¨
mvn spring-boot:run

# è·³è¿‡æµ‹è¯•
mvn install -DskipTests
```

## å¸¸è§é—®é¢˜

### 1. ä¾èµ–ä¸‹è½½å¤±è´¥

**è§£å†³**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œé…ç½® Maven é•œåƒæºã€‚

### 2. ç‰ˆæœ¬å†²çª

**è§£å†³**ï¼šç¡®ä¿çˆ¶é¡¹ç›®çš„ `dependencyManagement` æ­£ç¡®é…ç½®ï¼Œå­æ¨¡å—ä¸è¦æŒ‡å®šç‰ˆæœ¬å·ã€‚

### 3. ç¼–è¯‘é”™è¯¯

**è§£å†³**ï¼šæ£€æŸ¥ JDK ç‰ˆæœ¬æ˜¯å¦ä¸º 17+ï¼ŒIDE ä¸­é…ç½®çš„ JDK ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ã€‚

## ä¸‹ä¸€æ­¥

é¡¹ç›®åˆå§‹åŒ–å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å­¦ä¹  Spring Cloud çš„æ ¸å¿ƒç»„ä»¶äº†ã€‚

---

| â¬…ï¸ ä¸Šä¸€ç«  | ğŸ  ç›®å½• | ä¸‹ä¸€ç«  â¡ï¸ |
|:----------|:------:|----------:|
| [å¼€å‘ç¯å¢ƒå‡†å¤‡](./01-å¼€å‘ç¯å¢ƒå‡†å¤‡.md) | [è¿”å›ç›®å½•](../../../) | [Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒ](../03-æœåŠ¡æ³¨å†Œä¸å‘ç°/01-Eureka-æœåŠ¡æ³¨å†Œä¸­å¿ƒ.md) |

